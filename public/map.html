<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ClaimGame - Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    html,body,#map{height:100%;margin:0;padding:0}
    #controls{position:static;z-index:auto;background:rgba(255,255,255,0.95);padding:8px;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.15)}
    #status{font-size:12px;margin-bottom:4px}
    button{margin-right:4px}
    /* Mobile Panel Anpassungen */
    @media (max-width: 600px) {
      #controls {
        width: auto !important;
        min-width: 40vw !important;
        max-width: 96vw !important;
        box-sizing: border-box;
        font-size: 1.08em;
        padding: 4vw 3vw;
        border-radius: 4vw;
        max-height: 80vh;
        overflow-y: auto;
      }
      #controls button {
        font-size: 1.1em;
        padding: 0.9em 1.2em;
        margin: 0.4em 0.2em;
        border-radius: 1.2em;
        min-width: 44vw;
        max-width: 100vw;
        box-sizing: border-box;
      }
      #controls label {
        font-size: 1em;
        margin-top: 0.5em;
        display: block;
      }
      #status, #tokenInfo {
        font-size: 1em;
        word-break: break-word;
      }
      #map {
        top: 0 !important;
        left: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
      }
      body {
        padding: 0.5em !important;
        font-size: 1.08em;
      }
    }
  </style>
</head>
<body>
  <!-- topBar and left controls removed to avoid overlapping map controls -->
  <div id="map"></div>
  <div id="messageBox" class="message-box modern-panel" style="display:block">
    <div id="msgStatus" class="msg-line">Not registered</div>
    <div id="msgStats" class="msg-line" style="font-weight:600;color:#4f8cff;display:none;">
      Level <span id="playerLevel">1</span> | XP: <span id="playerXP">0</span>/<span id="playerXPNext">100</span> | Loot: <span id="lootCount">0</span>
    </div>
    <div id="msgWake" class="msg-line"></div>
    <div id="msgToken" class="msg-line"></div>
  </div>
  <div id="bottomControls" class="bottom-controls">
    <button id="btnCenter" class="big-btn app-btn" title="Center" aria-label="Center">
      <!-- crosshair icon -->
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="12" cy="12" r="2" fill="#fff"/><path d="M12 3v2M12 19v2M3 12h2M19 12h2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M17.66 6.34l1.41-1.41M4.93 19.07l1.41-1.41" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>
    <button id="btnCompass" class="big-btn app-btn app-btn-ghost state-badge" title="Kompass" aria-label="Kompass" aria-pressed="false">
      <!-- compass icon -->
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 2a10 10 0 100 20 10 10 0 000-20z" fill="#fff" opacity="0.04"/><path d="M7 17l10-6-6 10-4-4z" fill="#fff"/><circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="0.7" opacity="0.25"/></svg>
    </button>
    <div class="menu bottom-user-menu">
      <button id="userMenuBtn" class="menu-btn app-btn app-btn-ghost" title="User Menu" aria-label="User Menu">Guest â–¾</button>
      <div id="userMenu" class="menu-dropdown" aria-hidden="true">
        <div id="userStats" class="user-stats" style="display:none">
          <div class="us-name"></div>
          <div class="us-role"></div>
          <div class="us-xp"></div>
        </div>
        <button id="btnRegister" class="app-btn app-btn-ghost" title="Register" aria-label="Register">
          <!-- user-plus icon -->
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 12a5 5 0 100-10 5 5 0 000 10z" fill="#fff"/><path d="M12 14c-5 0-9 3-9 6v2h18v-2c0-3-4-6-9-6z" fill="#fff"/><path d="M20 8v2h-2v2h-2V10h2V8h2z" fill="#fff"/></svg>
          <span class="btn-label">Register</span>
        </button>
        <button id="btnLogin" class="app-btn app-btn-ghost" title="Login" aria-label="Login">
          <!-- login icon -->
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10 17l5-5-5-5v10z" fill="#fff"/><path d="M4 21h14v-2H4V5h2V3H4a2 2 0 00-2 2v14a2 2 0 002 2z" fill="#fff"/></svg>
          <span class="btn-label">Login</span>
        </button>
        <button id="btnLogout" class="app-btn app-btn-ghost" title="Logout" aria-label="Logout">
          <!-- logout icon -->
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M16 13v-2H7V8l-5 4 5 4v-3h9z" fill="#fff"/></svg>
          <span class="btn-label">Logout</span>
        </button>
        <hr style="margin:0.5em 0; border:none; border-top:1px solid rgba(255,255,255,0.1)">
        <button id="btnTrackingToggle" class="app-btn app-btn-ghost state-badge" title="Route Tracking" aria-label="Route Tracking" aria-pressed="false">
          <!-- route icon -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 12h4m8 0h4M12 3v4m0 8v4" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/><circle cx="6" cy="12" r="2" fill="#fff"/><circle cx="18" cy="12" r="2" fill="#fff"/></svg>
          <span class="btn-label">Tracking</span>
        </button>
        <button id="btnRouteToggle" class="app-btn app-btn-ghost" title="Route Anzeigen" aria-label="Route Anzeigen">
          <!-- eye icon -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z" stroke="#fff" stroke-width="1.2"/><circle cx="12" cy="12" r="3" fill="#fff"/></svg>
          <span class="btn-label">Route anzeigen</span>
        </button>
      </div>
    </div>
    <button id="wakelockBtn" class="big-btn app-btn state-badge" title="Display" aria-label="Display" aria-pressed="false">
      <!-- display icon -->
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" fill="#fff"/><path d="M8 20h8" stroke="#fff" stroke-width="1.2" stroke-linecap="round"/></svg>
    </button>
  </div>
  <!-- Leaflet layer control will appear top-right by default -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
  <script src="map.js"></script>
</body>
</html>